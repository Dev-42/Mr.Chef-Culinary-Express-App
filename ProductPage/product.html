<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Culinary Delights | Explore Mr. Chef's Signature Recipes</title>
    <link rel="icon" type="image/x-icon" href="../Anas/logo.svg">
    <!-- Bootstrap Links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="./product.css">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script defer src="./product.js" type="module"></script>
    <!-- Google font links -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <!-- Anas Styles -->
    <link rel="stylesheet" href="../Anas/A-Styles/header.css">
    <link rel="stylesheet" href="../Anas/A-Styles/footer.css">
    <style>
      #ans-header li{
        margin-top: 12px;
        font-size: initial;

      }
      #ans-header a{
        font-size: initial;
      }
      
    </style>
  </head>
  <body onload="pageLoad()">
    <div class="container-fluid">
      <!-- NavBar Part of Anas -->
      <div id="navbar1221">

      </div>
      <!-- Page loader funtionality -->
      <div id="loader">

      </div>
      <div class="row" id="row1221">
        <div class="heading121">
          <h1 id="restaurantHead121">Our Restaurant Partners</h1>
        </div>
        <div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="card-wrapper container-sm d-flex justify-content-around" class="qwe1221">
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/mfe1ujm6miaegzct272j" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Haldiram's Prabhuji</h5>
                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/ogeytlvtiqgxj9ck7fxv" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Mon Chai</h5>

                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/1624ea9d29aa571ef082379692dac104" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Luxe Billard n Cafe</h5>
                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/rbtsr1x7zm2xfuo1wbwt" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Zafran</h5>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item carousel-item-next carousel-item-start">
              <div class="card-wrapper container-sm d-flex justify-content-around">
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/lusyoadysml8zeyaltlk" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">The Food Factory</h5>
                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/56c9ab92bd79745fd152a30fa2525426" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">KFC</h5>
                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/2b4f62d606d1b2bfba9ba9e5386fabb7" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Pizza Hut</h5>
                  </div>
                </div>
                <div class="card h-100 glass-card cardsmall12234" style="width: 18rem;margin-top: 10px">
                  <img src="https://res.cloudinary.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_508,h_320,c_fill/bqazy1ryphvebrww0lwc" class="card-img-top res1234" alt="...">
                  <div class="card-body">
                    <h5 class="card-title" id="topCard1221">Aminia</h5>
                  </div>
                </div>
              </div>
            </div>
            <!-- Carousal Button part -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
        <div class="spacebet" style="margin-top: 109px;"></div>
        <!-- Menus available to book cards -->
        <div class="row" style="margin-top: -44px;">
          <div class="col-12" style="margin-left:108px">
            <div class="heading1212">
              <h1 id="restaurantHead1212">Our Recipies</h1>
            </div>
            <div>
              <hr id="hrStyle1221">
              <div class="search-container">
                <input type="text" placeholder="Search Recipies..." id="inputSearch1221">
              </div>
              <p id="sortFrist1221">Cost: Low to High</p>
              <p id="sortFrist12212">Cost: High to Low</p>
              <!-- <p id="filterbtn1221">Filter</p> -->
              <select id="filterbtn1221">
                <option value="">All</option>
                <option value="veg">Veg</option>
                <option value="non-veg">Non Veg</option>
              </select>
            </div>
            <div class="row row-cols-1 row-cols-md-3 g-4" id="cardContainer">
              <!-- Appending cards via Javascript -->
            </div>
          </div>
        </div>
      </div>
      <!-- Top to bottom Button -->
      <div class="row">
        <div class="col-12">
          <button type="button" class="btn btn-danger btn-floating btn-lg" id="btn-back-to-top">
              <!-- <i class="fas fa-arrow-up"></i> -->
              <!-- <img src="https://static1.hkrtcdn.com/hknext/static/media/common/misc/top.svg" alt="topButton"> -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-circle-fill upbtn1221" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"/>
              </svg>
          </button>
          <a href="../CartPage/bag.html">
            <img src="./buy.png" alt="cart icon" id="cartDev1234">
          </a>
        </div>
      </div>
      <!-- Anas Footer part -->
      <div id="footer1221" style="margin-top: 50px;">

      </div>
    </div>
    <script>
      let preloader = document.getElementById('loader')
      function pageLoad(){
      preloader.style.display = 'none'
    }
    </script>
    <script type="module">
      // import navbar from './Components/importheader.js'
        import navbar from '../Anas/Components/importheader.js'
        import footer from '../Anas/Components/importfooter.js'

        let navbar1221 = document.getElementById('navbar1221')
        navbar1221.innerHTML = navbar()

        const hamburger = document.querySelector(".ans-hamburger");
        const navMenu = document.querySelector(".ans-nav-menu");

        hamburger.addEventListener("click", function () {
            navMenu.classList.toggle("active")
            hamburger.classList.toggle("active")
        })

        let cardContainer = document.getElementById('cardContainer');

              async function getData() {
                try {
                  let res = await fetch('https://mr-chef-recipies.onrender.com/foods');
                  // let res = await fetch('https://api.json-generator.com/templates/-lXcV44JeNYg/data?access_token=qky8mjozwqrlw93do8lcnl50a9yv114010r0gays')
                  let data = await res.json();
                  displayData(data);
                } catch (err) {
                  console.log("Error", err);
                }
              }

              getData();

              function displayData(data) {
                cardContainer.innerHTML = "";

                data.forEach((item) => {
                  let cardCol = document.createElement('div');
                  cardCol.setAttribute('class', 'col');
                //   cardCol.style.height = '24rem'

                  let card = document.createElement('div');
                  card.style.width = '18rem';
                  card.setAttribute('class', 'card h-100 glass-card resdev1221');
                  // This will be used for sorting
                  card.setAttribute('data-price',item.price)
                  updateCardWidth(card)

                  let img = document.createElement('img');
                  img.setAttribute('class', 'card-img-top');
                  img.setAttribute('src', item.img);

                  let cardBody = document.createElement('div');
                  cardBody.setAttribute('class', 'card-body');

                  let h5 = document.createElement('h5');
                  h5.setAttribute('class', 'card-title');
                  h5.innerText = item.title;

                  let p = document.createElement('p');
                  p.setAttribute('class', 'card-text');
                  p.innerText = item.description;

                  let paraPrice = document.createElement('p');
                  paraPrice.innerText = "â‚¹" + item.price;

                  cardBody.append(h5, p, paraPrice);

                  let btn = document.createElement('button');
                  btn.setAttribute('type', 'button');
                  btn.setAttribute('class', 'btn btn-danger');
                  btn.setAttribute('id', 'btn1221');
                  // btn.setAttribute('class','onClick(this)')
                  btn.innerText = "Order Now";

                  btn.addEventListener('click',()=>{
                      storeData(item)
                      clickBtn(btn);
                  })

                  card.append(img, cardBody, btn);
                  cardCol.append(card);
                  cardContainer.append(cardCol);
                });
              }


        let arr = JSON.parse(localStorage.getItem('food-items')) || [];
        function storeData(item){
          arr.push(item)
          console.log(arr)
          localStorage.setItem('food-items',JSON.stringify(arr))
        }

        // Sorting part
        let sortLowHigh = document.getElementById('sortFrist1221')
        sortLowHigh.addEventListener('click',()=>{
          sortLow()
        })
        // https://mr-chef-recipies.onrender.com/foods&_sort=price&_order=asc
        async function sortLow(){
          let data  = await fetch('https://mr-chef-recipies.onrender.com/foods?&_sort=price&_order=asc')
          // let data = await fetch('https://api.json-generator.com/templates/-lXcV44JeNYg/data?access_token=qky8mjozwqrlw93do8lcnl50a9yv114010r0gays?&_sort=price&_order=asc')
          let res = await data.json()
          displayData(res)
          console.log(res)
        }
        // Sorting high to low
        let sortHighLow = document.getElementById('sortFrist12212')
        sortHighLow.addEventListener('click',()=>{
          sortHigh()
        })
        async function sortHigh(){
          let data = await fetch('https://mr-chef-recipies.onrender.com/foods?&_sort=price&_order=desc')
          // let data = await fetch('https://api.json-generator.com/templates/-lXcV44JeNYg/data?access_token=qky8mjozwqrlw93do8lcnl50a9yv114010r0gays?&_sort=price&_order=desc')
          let res = await data.json()
          displayData(res)
          console.log(res)
        }

        // Filter part

        let filterPart = document.getElementById('filterbtn1221')
        filterPart.addEventListener('change',filterFun)

        async function filterFun(){
          let data = await fetch('https://mr-chef-recipies.onrender.com/foods')
          // let data = await fetch('https://api.json-generator.com/templates/-lXcV44JeNYg/data?access_token=qky8mjozwqrlw93do8lcnl50a9yv114010r0gays')
          let res = await data.json()
          console.log(res)

          let fillArr = res.filter((elm)=>{
            if(filterPart.value == elm.key){
              return elm
            }
            else if(filterPart.value == ""){
              return res
            }
          })
          displayData(fillArr)
        }

        // Search bar implementation with debouncing
        let searchBar = document.getElementById('inputSearch1221');
        let timeoutId;

        searchBar.addEventListener('input', debounce(searchImp, 500));

        async function searchImp() {
          clearTimeout(timeoutId);
          timeoutId = setTimeout(async () => {
            let data = await fetch(`https://mr-chef-recipies.onrender.com/foods?&q=${searchBar.value}`);
            let res = await data.json();
            displayData(res);
          }, 500);
        }

        function debounce(func, delay) {
          let timeoutId;
          return function () {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(func, delay);
          };
        }

        // Bottom to top functionality
        let mybutton = document.getElementById("btn-back-to-top");

        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function () {
          scrollFunction();
        };

        function scrollFunction() {
          if (
            document.body.scrollTop > 30 ||
            document.documentElement.scrollTop > 30
          ) {
            mybutton.style.display = "block";
          } else {
            mybutton.style.display = "none";
          }
        }
        // When the user clicks on the button, scroll to the top of the document
        mybutton.addEventListener("click", backToTop);

        function backToTop() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        window.addEventListener('resize', handleResize);

        function handleResize() {
          // Call functions to adjust the layout or styles based on the window size
          updateCardWidth();
        }
        function updateCardWidth(card) {
          const windowWidth = window.innerWidth;
          const cardWidth = Math.min(windowWidth * 0.9, 300); // Adjust the percentage or fixed value as needed
          card.style.width = cardWidth + 'px';
        }

        let footer1221 = document.getElementById('footer1221')
        footer1221.innerHTML = footer()

        // for login
        let user = localStorage.getItem("username")
        let ans_login_btn = document.getElementById("ans-login-btn");
        if(user){
            ans_login_btn.textContent = user;
        } else{
            ans_login_btn.textContent = "SIGNOUT"
        }

        // Changing the state of the button

        function clickBtn(btn){
          let clicks = true
          if(clicks == true){
            btn.setAttribute('class','visited')
            btn.innerText = "Added To Cart";
          }
          else{
            btn.removeAttribute("class")
            btn.innerText = "Order Now"
          } 
        }

    </script>
  </body>
</html>